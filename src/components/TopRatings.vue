<template>
        <div class="form-group text-right mt-3">
            <input type="search" placeholder="#მოძებნე სტილისტი ან სალონი" id="searchInput" class="form-control" />
            <button class="btn mt-1" style="background-color: #1DA1F2; color: white;">
            #ძიება
<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="45" height="45"
viewBox="0 0 172 172"
style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#ffffff"><path d="M85.94625,6.83297c-0.47829,0.00789 -0.94968,0.11544 -1.38406,0.31578c-19.77351,0.35183 -39.43706,7.83015 -54.50922,22.90422c-28.28064,28.28423 -30.65807,72.73005 -7.095,103.7375c0.73805,0.99554 1.95448,1.5172 3.18446,1.36563c1.22997,-0.15156 2.28338,-0.95293 2.75767,-2.09786c0.47429,-1.14493 0.29615,-2.45646 -0.46634,-3.4334c-21.51469,-28.31191 -19.38825,-68.83237 6.4836,-94.7075c13.24233,-13.24401 30.32557,-20.16862 47.64265,-20.98266v13.76c-10.32075,0.6107 -20.51505,3.90338 -29.40797,9.95719c-1.06404,0.67101 -1.67702,1.86925 -1.59851,3.12474c0.07851,1.25549 0.83599,2.36804 1.97533,2.90126c1.13934,0.53322 2.47887,0.4021 3.49318,-0.34194c8.63754,-5.87996 18.6551,-8.83819 28.68906,-8.90234c0.23722,0.02017 0.4759,0.01567 0.71219,-0.01344c13.05273,0.09603 26.07769,5.11701 36.05953,15.09703c9.21319,9.21153 14.17324,21.01519 14.96265,33.04281h-13.78015c-1.74666,-19.25153 -17.96801,-34.4 -37.66531,-34.4c-19.6973,0 -35.91865,15.14847 -37.66531,34.4h-13.78015c0.60447,-8.96605 3.51683,-17.80623 8.7814,-25.53797c0.74302,-1.0594 0.82875,-2.44612 0.22187,-3.58898c-0.60687,-1.14285 -1.8037,-1.84852 -3.0975,-1.82634c-1.13232,0.01937 -2.18259,0.59475 -2.80844,1.5386c-6.54619,9.61395 -9.86769,20.74803 -10.05125,31.92078c-0.16046,0.57721 -0.16741,1.18631 -0.02016,1.76703c0.19999,14.69222 5.87492,29.31867 17.07234,40.51406c10.5349,10.53299 24.10465,16.15096 37.90719,16.95141v13.59875c-14.21956,-0.68252 -28.28352,-5.28813 -40.18485,-14.3311c-0.97694,-0.76248 -2.28847,-0.94062 -3.4334,-0.46633c-1.14492,0.47429 -1.94629,1.52769 -2.09785,2.75766c-0.15157,1.22997 0.37009,2.44641 1.36562,3.18445c13.64023,10.36423 29.8854,15.40535 46.20484,15.73531c0.94237,0.49004 2.05825,0.51732 3.02344,0.0739c19.77349,-0.35184 39.43533,-7.83033 54.50922,-22.90422c28.28426,-28.28426 30.66447,-72.72688 7.10172,-103.7375c-0.62432,-0.84723 -1.60208,-1.36211 -2.6539,-1.3975c-1.33579,-0.04567 -2.57713,0.68645 -3.18349,1.87756c-0.60636,1.19111 -0.46797,2.62561 0.35489,3.67884c21.51501,28.31562 19.3915,68.83912 -6.4836,94.71422c-13.24435,13.24435 -30.32533,20.16876 -47.64265,20.98266v-13.76c10.32058,-0.61047 20.51457,-3.90305 29.40797,-9.95719c1.06404,-0.67101 1.67702,-1.86925 1.59851,-3.12474c-0.07851,-1.25549 -0.83599,-2.36804 -1.97533,-2.90126c-1.13934,-0.53322 -2.47887,-0.4021 -3.49318,0.34194c-8.63754,5.87996 -18.6551,8.83819 -28.68906,8.90234c-0.23722,-0.02017 -0.4759,-0.01567 -0.71219,0.01344c-13.05273,-0.09603 -26.07769,-5.11701 -36.05953,-15.09703c-9.21319,-9.21153 -14.17324,-21.01519 -14.96265,-33.04281h13.78015c1.74666,19.25153 17.96801,34.4 37.66531,34.4c19.6973,0 35.91865,-15.14847 37.66531,-34.4h13.78015c-0.60447,8.96605 -3.51683,17.80623 -8.7814,25.53797c-0.7097,1.01512 -0.81895,2.33338 -0.28604,3.45148c0.53291,1.1181 1.62572,1.86343 2.8612,1.95143c1.23548,0.088 2.42289,-0.49492 3.1089,-1.5262c6.5462,-9.61395 9.86769,-20.74803 10.05125,-31.92078c0.16046,-0.57721 0.16741,-1.18631 0.02016,-1.76703c-0.19999,-14.69222 -5.87492,-29.31867 -17.07235,-40.51406c-10.08074,-10.07891 -22.9356,-15.703 -36.12,-16.87078c-0.59479,-0.05268 -1.1913,-0.04609 -1.78719,-0.08062v-13.59875c14.22096,0.68173 28.28387,5.28735 40.18485,14.33109c0.97694,0.76249 2.28847,0.94063 3.4334,0.46634c1.14493,-0.47429 1.94629,-1.52769 2.09786,-2.75767c0.15156,-1.22997 -0.3701,-2.44641 -1.36563,-3.18446c-13.63882,-10.36437 -29.8854,-15.40533 -46.20484,-15.73531c-0.50571,-0.26378 -1.06906,-0.39769 -1.63938,-0.38969zM86,55.04c17.00395,0 30.72266,13.60592 30.93985,30.55687c-0.03321,0.27447 -0.03321,0.55194 0,0.82641c-0.22789,16.94151 -13.94269,30.53672 -30.93985,30.53672c-17.00395,0 -30.72266,-13.60592 -30.93985,-30.55687c0.03321,-0.27447 0.03321,-0.55194 0,-0.82641c0.22789,-16.94151 13.94269,-30.53672 30.93985,-30.53672zM86,75.68c-5.70008,0 -10.32,4.61992 -10.32,10.32c0,5.70008 4.61992,10.32 10.32,10.32c5.70008,0 10.32,-4.61992 10.32,-10.32c0,-5.70008 -4.61992,-10.32 -10.32,-10.32z"></path></g></g></svg>          
        </button>
        </div>

        <div class="mt-3 p-3 text-left" style="background-color:#F7F9FA; border: 1px solid #EBEEF0;">
            <h4 class="topRatingFONT_GEO" style="font-weight: 700">TOP წევრები</h4>
            <button class='btn btn-info topRatingFONT_GEO'>როგორ მოვხვდე TOP - ში</button>
        </div>

    <div class="mt-3 p-3 text-left" style="background-color:#F7F9FA; border: 1px solid #EBEEF0;">
        <h4 class="topRatingFONT_GEO" style="font-weight: 700">შესაძლოა იცნობდეთ</h4>
    <div v-if='getSpinnerRatings' >
        <Spinner/>
    </div>
    
    <div v-else class="image m-2" v-for='user in getTopRatedUsers' :key='user' style="display: inline-block;">
        <div v-if='getImages(user)'></div>
        <router-link :to="{ name: 'UserDetailView', params: { name: user.name }}">
            <!-- <div v-if='getImages(user)'></div> -->
        <img :src="url"
        class="round_picture" 
        @click='detailedUserView(user)'
        style="display: inline-block;"
        width="60" height="60"></router-link>
        <p style="font-size: 15px;" class="text-center">
            <span v-if='user.type === "Stylist"' 
            class="badge badge-primary"
            >{{ user.name.toUpperCase() + '.' + user.surname.toUpperCase()[0] }}
             <!-- {{user.type}} -->
            </span>
            <span v-else class="badge badge-danger">
             {{ user.name.toUpperCase()}}
             <!-- {{user.type}} -->
            </span>
        </p>
    </div>
    </div>

    <div class="mt-3 p-3 text-left" style="background-color:#F7F9FA; border: 1px solid #EBEEF0; position: -webkit-sticky !important;
  position: sticky !important; top: 50px;">
        <h4 class="topRatingFONT_GEO" style="font-weight: 700 ">ყველაზე მოთხოვნადი? <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="40" height="40"
viewBox="0 0 172 172"
style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g><path d="M139.2125,113.95c0,28.4961 -23.822,51.6 -53.2125,51.6c-29.3905,0 -53.2125,-23.1039 -53.2125,-51.6c0,-38.7 48.7792,-70.95 48.7792,-107.5c11.0811,5.3707 27.9328,24.3595 27.9328,49.45c0,10.75 -1.3287,21.5 -1.3287,21.5c13.3042,-4.3 13.3042,-19.35 13.3042,-19.35c0,0 17.7375,23.65 17.7375,55.9z" fill="#1da1f2"></path><path d="M86.1548,73.2548c0.4687,2.2575 0.7697,6.2049 0.7697,8.6c0,26.0967 -28.7197,30.4913 -31.0202,51.4452c-0.1548,14.8952 4.2183,32.2543 28.9992,32.2543c18.2965,0 31.1965,-16.1809 31.1965,-36.1372c0.0043,-19.7026 -24.8755,-53.707 -29.9452,-56.1623z" fill="#ffffff"></path><path d="M86,167.7c-30.5257,0 -55.3625,-24.1101 -55.3625,-53.75c0,-20.3046 12.8613,-38.7215 25.2969,-56.5364c12.0744,-17.2903 23.478,-33.626 23.478,-50.9636c0,-0.7396 0.3784,-1.4319 1.0062,-1.8232c0.6278,-0.387 1.4147,-0.4386 2.0812,-0.1118c12.47,6.0458 29.1454,25.9849 29.1454,51.385c0,6.8929 0.0129,13.7041 -0.6493,17.8665c8.2173,-5.0095 8.3248,-15.5961 8.3248,-15.7165c0,-0.9245 0.5934,-1.7458 1.4706,-2.0382c0.8815,-0.2924 1.8447,0.0043 2.3994,0.7482c0.7439,0.989 18.1675,24.596 18.1675,57.19c0.0043,29.6399 -24.8282,53.75 -55.3582,53.75zM83.5662,10.0448c-1.4362,17.3677 -12.9473,33.8539 -24.1015,49.8327c-12.0615,17.2645 -24.5272,35.1224 -24.5272,54.0725c0,27.2663 22.9061,49.45 51.0625,49.45c28.1564,0 51.0625,-22.1837 51.0625,-49.45c0,-23.0222 -9.3869,-41.7487 -14.3319,-50.0262c-1.3846,5.2761 -4.9149,12.6205 -13.8933,15.523c-0.7224,0.2408 -1.5265,0.0688 -2.0941,-0.4429c-0.5719,-0.5117 -0.8256,-1.2857 -0.6708,-2.0382c0.0215,-0.1032 1.2814,-10.6726 1.2814,-21.0657c0,-21.3065 -12.9129,-38.8849 -23.7876,-45.8552z" fill="#4788c7"></path></g></g></svg>
        </h4>
        
        <p><span class="topRatingFONT_GEO"
        style="font-weight: 700">მანიკურ პედიკური</span></p>
    </div>

    <div class="mt-3 p-3 text-left" style="background-color:#F7F9FA; border: 1px solid #EBEEF0; position: -webkit-sticky !important;
  position: sticky !important; top: 220px;">
        <h4 class="topRatingFONT_GEO" style="font-weight: 700">რას გთავაზობს ARTISTICA?</h4>
        <p style="font-weight: 200">
            ლორემ იფსუმ დოლორ სით ამეთ, ეი ყუემ აუთემ 
            <span style="font-weight: 700">ეუისმოდ</span> 
            მეი, აეთერნო სცრიფთა ეი ჰას. 
            ეუმ ფრომფთა <span style="font-weight: 700">ეუისმოდ</span> 
             ათ, ეი ვიხ თამყუამ ლეგიმუს სუავითათე, უთ გრაეცო <span style="font-weight: 700">სუავითათე</span>  ნომინავი ასსუევერით ესთ.            
        </p>
    </div>



</template>

<script>
import { mapActions, mapGetters } from 'vuex'
import firebase from 'firebase/app'
import Spinner from './Spinner.vue'
export default {
    name: 'TopRatingsApp',
    props: {
        obj: {
            type: Object
        }
    },
    data(){
        return{ url: ''}
    },
    components: {Spinner},
    computed: {...mapGetters(['getTopRatedUsers', 'getSpinnerRatings'])},
    methods: {
        ...mapActions(['setRatings', 'detailedUserView']),
        // getUserDetailView(user){
        //     console.log(user);
        //     this.getDetailUser(user)
        // },
        getImages(user){
            var storageRef = firebase.storage().ref();
            storageRef
            .child('profile_pictures/' + user.uid + '/profile')
            .getDownloadURL()
            .then((url) => {
                console.log(user.uid);
                this.url = url
            })
        }
    },
    mounted(){
        this.setRatings()
    }
}
</script>
<style lang="scss">
@font-face {
    font-family: topRatingFONT_GEO;
    src: url('../fonts/bpg_extrasquare_mtavruli_2009.ttf');
}
@font-face {
    font-family: topRatingFONT_ENG;
    src: url('../fonts/Caveat-Regular.ttf');
}
.topRatingFONT_GEO {
    font-family: topRatingFONT_GEO;
    font-weight: 400;
}
.topRatingFONT_ENG {
    font-family: topRatingFONT_ENG;
}
.round_picture {
    border-radius: 50%;
}
</style>